"""
GraphQL Schema for {{.ProjectName}} BFF (GraphQL Yoga)
Generated by bffgen - Backend-for-Frontend Generator
"""

scalar DateTime
scalar JSON

"""
Health check response
"""
type HealthCheck {
  status: String!
  timestamp: DateTime!
  version: String
  uptime: Float!
}

"""
User type representing an authenticated user
"""
type User {
  id: ID!
  email: String!
  name: String
  avatar: String
  roles: [String!]!
  createdAt: DateTime!
  updatedAt: DateTime!
}

"""
Aggregated dashboard data from multiple microservices
"""
type Dashboard {
  user: User!
  summary: DashboardSummary!
  recentActivities: [Activity!]!
  notifications: [Notification!]!
}

type DashboardSummary {
  totalItems: Int!
  activeCount: Int!
  pendingCount: Int!
  completedCount: Int!
}

type Activity {
  id: ID!
  type: ActivityType!
  title: String!
  description: String
  timestamp: DateTime!
  metadata: JSON
}

enum ActivityType {
  LOGIN
  LOGOUT
  CREATE
  UPDATE
  DELETE
  VIEW
}

type Notification {
  id: ID!
  title: String!
  message: String!
  type: NotificationType!
  read: Boolean!
  actionUrl: String
  createdAt: DateTime!
}

enum NotificationType {
  INFO
  WARNING
  ERROR
  SUCCESS
}

{{range .BackendServices}}
"""
Data from {{.Name}} service
"""
type {{.Name | ToPascalCase}}Data {
  id: ID!
  status: String!
  data: JSON
  updatedAt: DateTime
}

type {{.Name | ToPascalCase}}Item {
  id: ID!
  name: String!
  description: String
  createdAt: DateTime!
}
{{end}}

"""
Pagination info
"""
type PageInfo {
  hasNextPage: Boolean!
  hasPreviousPage: Boolean!
  startCursor: String
  endCursor: String
  totalCount: Int!
}

"""
Query root type
"""
type Query {
  """
  Health check endpoint
  """
  health: HealthCheck!

  """
  Get current authenticated user
  """
  me: User

  """
  Get aggregated dashboard data
  """
  dashboard(userId: ID!): Dashboard

  {{range .BackendServices}}
  """
  Get data from {{.Name}} service
  """
  {{.Name}}Data: {{.Name | ToPascalCase}}Data

  """
  List items from {{.Name}} service with pagination
  """
  {{.Name}}Items(
    first: Int = 10
    after: String
    filter: String
  ): {{.Name | ToPascalCase}}ItemConnection!
  {{end}}
}

{{range .BackendServices}}
type {{.Name | ToPascalCase}}ItemConnection {
  edges: [{{.Name | ToPascalCase}}ItemEdge!]!
  pageInfo: PageInfo!
}

type {{.Name | ToPascalCase}}ItemEdge {
  node: {{.Name | ToPascalCase}}Item!
  cursor: String!
}
{{end}}

"""
Mutation root type
"""
type Mutation {
  """
  Update user profile
  """
  updateProfile(input: UpdateProfileInput!): User!

  """
  Mark notification as read
  """
  markNotificationRead(id: ID!): Notification!

  {{range .BackendServices}}
  """
  Create item in {{.Name}} service
  """
  create{{.Name | ToPascalCase}}Item(input: Create{{.Name | ToPascalCase}}ItemInput!): {{.Name | ToPascalCase}}Item!
  {{end}}
}

input UpdateProfileInput {
  name: String
  avatar: String
}

{{range .BackendServices}}
input Create{{.Name | ToPascalCase}}ItemInput {
  name: String!
  description: String
}
{{end}}

"""
Subscription root type for real-time updates
"""
type Subscription {
  """
  Subscribe to new notifications
  """
  notificationAdded(userId: ID!): Notification!

  """
  Subscribe to activity updates
  """
  activityAdded(userId: ID!): Activity!
}
